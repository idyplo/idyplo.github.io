function tstarLordToc(t,i,n){for(var e=t.split("$"),a=/[^{\}]+(?=})/g,o=0;o<e.length;o++){var s=e[o].split("=");if(s[0].trim()==i)return null!=(n=s[1]).match(a)&&String(n.match(a)).trim()}return!1}!function(t){"use strict";var i=function(i){return this.each(function(){var n,e,a=t(this),o=a.data(),s=[a],c=this.tagName,r=0;n=t.extend({content:"body",headings:"h1,h2,h3"},{content:o.toc||void 0,headings:o.tocHeadings||void 0},i),e=n.headings.split(","),t(n.content).find(n.headings).attr("id",function(i,n){return n||function(t){0===t.length&&(t="?");for(var i=t.replace(/\s+/g,"_"),n="",e=1;null!==document.getElementById(i+n);)n="_"+e++;return i+n}(t(this).text())}).each(function(){var i=t(this),n=t.map(e,function(t,n){return i.is(t)?n:void 0})[0];if(n>r){var a=s[0].children("li:last")[0];a&&s.unshift(t("<"+c+"/>").appendTo(a))}else s.splice(0,Math.min(r-n,Math.max(s.length-1,0)));t("<li/>").appendTo(s[0]).append(t("<a/>").text(i.text()).attr("href","#"+i.attr("id"))),r=n})})},n=t.fn.toc;t.fn.toc=i,t.fn.toc.noConflict=function(){return t.fn.toc=n,this},t(function(){i.call(t("[data-toc]"))})}(window.jQuery),$(".post-body b").each(function(){var t=$(this),i=t.text();i.toLowerCase().trim().match("{stpify}")&&(i=0!=tstarLordToc(i,"title")?tstarLordToc(i,"title"):"Table of Contents",t.replaceWith('<div class="stpify-wrap"><div class="stpify-inner"><a href="javascript:;" class="stpify-title" role="button" title="'+i+'"><span class="stpify-title-text">'+i+'</span></a><ol id="stpify"></ol></div></div>'),$(".stpify-title").each(function(t){(t=$(this)).on("click",function(){t.toggleClass("is-expanded"),$("#stpify").slideToggle(170)})}),$("#stpify").toc({content:"#postBody",headings:"h2,h3,h4"}),$("#stpify li a").each(function(t){(t=$(this)).click(function(){return $("html,body").animate({scrollTop:$(t.attr("href")).offset().top-20},500),!1})}))});
